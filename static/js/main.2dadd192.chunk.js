(this["webpackJsonplocal-chat-sample"]=this["webpackJsonplocal-chat-sample"]||[]).push([[0],{35:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s,o,u,d,l=n(0),j=n.n(l),b=n(13),p=n.n(b),m=n(6),x=n(3),g=n(4),O=n(11),h=function(){return Object(O.b)()},f=O.c,v=n(5),y=Object(v.b)({name:"user",initialState:{userList:[],currentUser:null},reducers:{register:function(e,t){e.userList.push(t.payload)},login:function(e,t){e.currentUser=t.payload},logout:function(e,t){e.currentUser=null}}}),R=y.actions,k=R.register,C=R.login,S=R.logout,w=function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.userList},N=function(e){return e.user.currentUser},U=y.reducer,I=Object(v.b)({name:"router",initialState:{currentRoute:"login"},reducers:{switchRoute:function(e,t){e.currentRoute=t.payload}},extraReducers:function(e){e.addCase(k,(function(e){e.currentRoute="login"})).addCase(C,(function(e){e.currentRoute="main"})).addCase(S,(function(e){e.currentRoute="login"}))}}),z=I.actions.switchRoute,L=function(e){return e.router.currentRoute},F=I.reducer,B=n(1),E=g.a.div(r||(r=Object(x.a)(["\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  border: 1px solid black;\n  border-radius: 20px;\n  font-size: 14px;\n"]))),M=g.a.div(a||(a=Object(x.a)(["\n  font-size: 3rem;\n  margin-bottom: 20px;\n"]))),D=g.a.input(c||(c=Object(x.a)(["\n  width: 80%;\n  height: 2.5rem;\n  padding: 0 10px;\n  font-size: 1rem;\n  outline: none;\n  border: 1px solid black;\n  border-radius: 5px;\n  cursor: pointer;\n"]))),J=g.a.input(i||(i=Object(x.a)(["\n  width: 50%;\n  height: 2rem;\n  margin-top: 20px;\n  padding: 5px 20px;\n  border: 1px solid black;\n  border-radius: 5px;\n  cursor: pointer;\n"]))),P=function(e){e.setUserName;var t=h(),n=j.a.useState(""),r=Object(m.a)(n,2),a=r[0],c=r[1],i=f(w);return Object(B.jsx)(j.a.Fragment,{children:Object(B.jsxs)(E,{children:[Object(B.jsx)(M,{children:"Welcome"}),Object(B.jsx)(D,{type:"text",value:a,onChange:function(e){c(e.target.value)},placeholder:"Your name"}),Object(B.jsx)(J,{type:"button",value:"Login",onClick:function(){if(a){var e=i.find((function(e){return e.name===a}));e?t(C(e)):alert("User not found, please try again or sign-up")}else alert("Please enter user name")}}),Object(B.jsx)(J,{type:"button",value:"Sign Up",onClick:function(e){t(z("registration"))}})]})})},W=n(24),Y=n(12),A=n(39),H={id:Object(A.a)(),name:"I AM BOT"},T={id:Object(A.a)(),text:"Welcome, i am bot",user:H},q=Object(v.b)({name:"chatRoom",initialState:{chatRooms:{}},reducers:{createChatRoom:function(e,t){e.chatRooms[t.payload]=[Object(Y.a)(Object(Y.a)({},T),{},{date:(new Date).toISOString()})]},sendMessage:{reducer:function(e,t){var n;console.log("state.chatRooms[action.payload.userId]",e.chatRooms[t.payload.userId]),console.log("action.payload.messages",t.payload.messages),(n=e.chatRooms[t.payload.userId]).push.apply(n,Object(W.a)(t.payload.messages))},prepare:function(e){return{payload:{userId:e.user.id,messages:[e,Object(Y.a)(Object(Y.a)({},e),{},{id:Object(A.a)(),user:H})]}}}}}}),G=q.actions,K=G.createChatRoom,Q=G.sendMessage,V=function(e){return e.chatRoom.chatRooms[e.user.currentUser.id]||[]},X=q.reducer,Z=function(){var e=h(),t=f(N),n=j.a.useState(""),r=Object(m.a)(n,2),a=r[0],c=r[1];return Object(B.jsxs)("div",{className:"input-bar-container",children:[Object(B.jsx)("input",{type:"text",value:a,onChange:function(e){c(e.target.value)}}),Object(B.jsx)("input",{type:"button",value:">",onClick:function(){if(a){var n={id:Object(A.a)(),text:a,user:t,date:(new Date).toISOString()};e(Q(n)),c("")}}})]})},$=function(e){var t=e.author;return Object(B.jsx)("div",{className:"message-item-author",children:t})},_=function(e){var t=e.text;return Object(B.jsx)("div",{className:"message-item-content-container",children:t})},ee=function(e){var t=e.date;return Object(B.jsx)("div",{className:"message-item-date",children:t})},te=function(e){var t=e.message,n=f(N).id===t.user.id;return Object(B.jsxs)("div",{className:"message-item-container ".concat(n?"right-message":"left-message"),children:[Object(B.jsx)($,{author:t.user.name}),Object(B.jsx)(_,{text:t.text}),Object(B.jsx)(ee,{date:t.date})]})},ne=function(e){var t=e.messages;return Object(B.jsx)("div",{className:"message-list-container",children:t.map((function(e){return Object(B.jsx)(te,{message:e},e.id)}))})},re=function(e){e.userName;var t=j.a.useState(!1),n=Object(m.a)(t,2),r=n[0],a=n[1],c=h(),i=f(V),s=f(N);return j.a.useEffect((function(){r||((null===i||void 0===i?void 0:i.length)>0?a(!0):c(K(s.id)))}),[i,s,c,r]),Object(B.jsxs)("div",{className:"content-container",children:[!r&&Object(B.jsx)("h1",{children:"Loading...."}),r&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ne,{messages:i}),Object(B.jsx)(Z,{})]})]})},ae=function(){var e=h(),t=f(N);return Object(B.jsxs)("div",{className:"header-container ",children:[Object(B.jsx)("div",{children:"Hi, ".concat(t.name)}),Object(B.jsx)("input",{type:"button",value:"E",onClick:function(){e(S())}})]})},ce=function(){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ae,{}),Object(B.jsx)(re,{})]})},ie=g.a.div(s||(s=Object(x.a)(["\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n  border: 1px solid black;\n  border-radius: 20px;\n  font-size: 14px;\n"]))),se=g.a.div(o||(o=Object(x.a)(["\n  font-size: 3rem;\n  margin-bottom: 20px;\n"]))),oe=g.a.input(u||(u=Object(x.a)(["\n  width: 80%;\n  height: 2.5rem;\n  padding: 0 10px;\n  font-size: 1rem;\n  outline: none;\n  border: 1px solid black;\n  border-radius: 5px;\n  cursor: pointer;\n"]))),ue=g.a.input(d||(d=Object(x.a)(["\n  width: 50%;\n  height: 2rem;\n  margin-top: 20px;\n  padding: 5px 20px;\n  border: 1px solid black;\n  border-radius: 5px;\n  cursor: pointer;\n"]))),de=function(){var e=h(),t=j.a.useState(""),n=Object(m.a)(t,2),r=n[0],a=n[1],c=f(w);return Object(B.jsx)(j.a.Fragment,{children:Object(B.jsxs)(ie,{children:[Object(B.jsx)(se,{children:"Registration"}),Object(B.jsx)(oe,{type:"text",value:r,onChange:function(e){a(e.target.value)},placeholder:"Your name"}),Object(B.jsx)(ue,{type:"button",value:"Register",onClick:function(t){if(r)if(c.find((function(e){return e.name===r})))alert("User already exist, please try other name");else{var n={id:Object(A.a)(),name:r};e(k(n))}else alert("Please enter user name")}}),Object(B.jsx)(ue,{type:"button",value:"Back to login",onClick:function(t){e(z("login"))}})]})})};n(35);function le(){var e=f(L),t=f(N),n=!t&&(!e||"login"===e),r=!t&&"registration"===e,a=t||"main"===e;return Object(B.jsxs)("div",{className:"app-container",children:[n&&Object(B.jsx)(P,{}),r&&Object(B.jsx)(de,{}),a&&Object(B.jsx)(ce,{})]})}var je=n(16),be=n(22),pe=n.n(be),me=n(10),xe=n(2),ge=Object(xe.b)({chatRoom:X,user:U,router:F}),Oe={key:"root",version:2,storage:pe.a,blacklist:["router"]},he=Object(je.a)(Oe,ge),fe=Object(v.a)({reducer:he,middleware:[me.a]}),ve=Object(je.b)(fe),ye=fe,Re=n(23);p.a.render(Object(B.jsx)(O.a,{store:ye,children:Object(B.jsx)(Re.a,{persistor:ve,loading:null,children:Object(B.jsx)(le,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2dadd192.chunk.js.map